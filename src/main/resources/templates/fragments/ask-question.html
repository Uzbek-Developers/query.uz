<div xmlns:th="http://www.thymeleaf.org" th:fragment="ask-question">
    <div class="post-wrap">
        <h3 class="title"><a href="#" class="question-link">Qanday qilib JavaScriptda
            Internet bor yo'qligini
            tekshiriladi?</a> <span class="status">[ Ko'chilgan ]</span></h3>

        <div class="post-item ask-question">
            <form action="#" th:action="@{/ask_question}" th:object="${question}" method="POST">
                <div class="field-row">
                    <span class="label">Savol sarlavhasi:</span>

                    <div class="form-field"><input type="text" max-length="240"
                                                   th:field="*{questionTitle}"/></div>
                </div>
                <div class="field-row">
                    <span class="label">Savol matni: </span>

                    <div class="text-editor">
                        <div class="wmd-panel">
                            <div id="wmd-button-bar"></div>
                            <textarea class="wmd-input" id="wmd-input" th:field="*{questionContent}"></textarea>
                        </div>

                        <div id="wmd-preview" class="wmd-panel wmd-preview"></div>
                    </div>
                </div>
                <div class="field-row">
                    <span class="label">Teglarni kiriting:</span>


                    <div class="form-field">
                        <!--<input name="tagNameList" id="tagNameList" type="hidden" th:field="*{tags}"/>-->
                        <!--<input name="tagIdList" id="tagIdList" type="hidden" value="1,2"/>-->
                        <input type="hidden" name="tagIdList" id="tagIdList"/>

                        <div id="tagSelector"></div>
                    </div>
                </div>
                <div class="field-row footer">
                    <!--<div class="footer">-->

                    <input type="submit" class="btn btn-green shdw-1x" value="Submit"/>
                    <!--<button type="sumbit" class="btn btn-green shdw-2x">Savol Berish</button>-->
                    <a href="#">Link</a>
                    <!--</div>-->
                </div>
            </form>
        </div>
    </div>

    <script>
        $(document).ready(function () {
//            App.tagSelectorConfig();
            $("[type=submit]").on("click", function () {
                var hasError = false;
                $(".field-row input[type=text],.field-row  textarea").each(function () {
                    var field = $(".tag-input-box").children("input").is($(this)) ? $(".tag-input-box") : $(this);

                    if ((field.is("input") || field.is("textarea") ) && !$(this).val() || field.is("div") && !field.parent().attr("data-tags")) {
                        if (!hasError) hasError = !hasError ? true : hasError;
                        field.addClass("error-field");
                    } else {
                        field.removeClass("error-field");
                    }
                })
                if (hasError)
                    return false;
            });
            var TagSelector = $("#tagSelector").tagSelector({
                selectTag: function (selectedNameList, selectedIdList) {
                    $("#tagIdList").val(selectedIdList);
                },
                search: function (searchWord) {
                    console.log("API ga junatish uchun kalit so`z ==> ", searchWord);

                    $.ajax({
                        url: 'getTagList',
                        type: "POST",
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        },
                        dataType: "json",//Stringified Json Object
                        data: "{name: " + searchWord + "}",
                        success: function (resposeJsonObject) {
                            console.log("res", resposeJsonObject)

                        }});
                    var jsonArray = [
                        {
                            id: "1",
                            name: "Java" + parseInt(Math.random() * 100),
                            stat: parseInt(Math.random() * 100),
                            shortDesc: "Ok now i know that im not supposed to ask this kind of question but i'm at" +
                                    "the end of my game...Ok now i know that im not supposed to ask this kind of question " +
                                    "but i'm at the end of my game... " +
                                    "I just cannot find the name of this game.",
                            moreLink: "www.so.com"
                        },
                        {
                            id: "2",
                            name: "Java" + parseInt(Math.random() * 100),
                            stat: parseInt(Math.random() * 100),
                            shortDesc: "Ok now i know that im not supposed to ask this kind of question but i'm at" +
                                    "the end of my game...Ok now i know that im not supposed to ask this kind of question " +
                                    "but i'm at the end of my game... " +
                                    "I just cannot find the name of this game.",
                            moreLink: "www.so.com"
                        },
                        {
                            id: "3",
                            name: "Java" + parseInt(Math.random() * 100),
                            stat: parseInt(Math.random() * 100),
                            shortDesc: "Ok now i know that im not supposed to ask this kind of question but i'm at" +
                                    "the end of my game...Ok now i know that im not supposed to ask this kind of question ",
                            moreLink: "www.so.com"
                        }
                    ];

                    //API dan kelgan datani(array bulishi kerak, va yuqoridagi formatga utkazish kerak)
                    TagSelector.setOptionContent(jsonArray);
                }
            });
        });
    </script>
</div>